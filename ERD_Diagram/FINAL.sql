CREATE DATABASE SaleDB

GO

USE SaleDB

GO
CREATE TABLE ACCOUNTANT_ACCOUNT(
	AC_ID VARCHAR(25) NOT NULL UNIQUE,
	AC_PWD VARCHAR(80) NOT NULL,
	AC_NAME VARCHAR(50) NOT NULL,
	AC_GENDER VARCHAR(6) NOT NULL,
	AC_EMAIL VARCHAR(50) NOT NULL,
	AC_PHONENUM VARCHAR(10) NOT NULL,
	AC_ADDRESS VARCHAR(65) NOT NULL,
	PRIMARY KEY(AC_ID)
)

GO
CREATE TABLE ITEM(
	ITEM_ID VARCHAR(10) NOT NULL UNIQUE,
	ITEM_NAME VARCHAR(45) NOT NULL,
	ITEM_CATEGORY VARCHAR(20),
	ITEM_FUNCTION VARCHAR(25),
	ITEM_BRAND VARCHAR(30),
	ITEM_PRICE MONEY,
	ITEM_DESCRIPTION VARCHAR(170),
	ISPRESCRIPTION BIT,
	CONSTRAINT CK_BOOL_ISPRE CHECK (ISPRESCRIPTION IN (1,0)),
	PRIMARY KEY (ITEM_ID)
)

GO
CREATE TABLE COMPANY(
	COMPANY_NAME VARCHAR(90) NOT NULL UNIQUE,
	COMPANY_EMAIL VARCHAR(50) NOT NULL,
	COMPANY_PHONE VARCHAR(10) ,
	COMPANY_ADDRESS VARCHAR(55) NOT NULL,
	PRIMARY KEY(COMPANY_NAME)
)

GO
CREATE TABLE AGENCY_ACCOUNT(
	AGENCY_ID VARCHAR(25) NOT NULL UNIQUE,
	AGENCY_PWD VARCHAR(80) NOT NULL,
	AGENCY_NAME VARCHAR(90),
	AGENCY_ADDRESS VARCHAR(55),
	AGENCY_EMAIL VARCHAR(50),
	AGENCY_PHONE VARCHAR(10),
	PRIMARY KEY (AGENCY_ID)
)

CREATE TABLE WAREHOUSE (
	WAREHOUSE_ID VARCHAR(10) NOT NULL UNIQUE,
	WAREHOUSE_NAME VARCHAR(45),
	WAREHOUSE_ADDRESS VARCHAR(100),
	WAREHOUSE_PHONE VARCHAR(10),
	WAREHOUSE_MANAGERNAME VARCHAR (50),
	WAREHOUSE_SIZE INT,
	WAREHOUSE_CAPACITY INT
	PRIMARY KEY (WAREHOUSE_ID)
)


GO
CREATE TABLE IMPORTRECEIPT(
	RECEIPT_ID VARCHAR(10) NOT NULL UNIQUE,
	ITEM_ID VARCHAR(10) NOT NULL,
	AC_ID VARCHAR(25) NOT NULL,
	WAREHOUSE_ID VARCHAR(10) NOT NULL,
	ITEM_QUANTITY INT,
	IMPORT_DATE DATE,
	TOTAL_MONEY MONEY,
	PRIMARY KEY (RECEIPT_ID) ,
	FOREIGN KEY (ITEM_ID) REFERENCES ITEM(ITEM_ID),
	FOREIGN KEY (AC_ID) REFERENCES ACCOUNTANT_ACCOUNT(AC_ID),
	FOREIGN KEY (WAREHOUSE_ID) REFERENCES WAREHOUSE(WAREHOUSE_ID)
)
INSERT INTO IMPORTRECEIPT VALUES('1000499874', '119H0024', 'vidar1412', 'wh1923', 200, '2021-12-12', 23840000);
INSERT INTO IMPORTRECEIPT VALUES('1000499875', '119H0024', 'vidar1412', 'wh1923', 200, '2021-12-12', 23840000);
INSERT INTO IMPORTRECEIPT VALUES('1000499876', '119H0024', 'vidar1412', 'wh1923', 200, '2021-12-12', 23840000);
INSERT INTO IMPORTRECEIPT VALUES('1000499877', '119H0024', 'vidar1412', 'wh1923', 200, '2021-12-12', 23840000);

GO
CREATE TABLE EXPORTRECEIPT(
	ORDER_NUM VARCHAR(10) NOT NULL UNIQUE,
	AGENCY_ID VARCHAR(25) NOT NULL,
	WAREHOUSE_ID VARCHAR(10) NOT NULL,
	ITEM_ID VARCHAR(10) NOT NULL,
	ITEM_QUANTITY INT,
	TOTAL_MONEY MONEY,
	DATE_DISPATCHED DATE,
	EXPECTED_DELIVERY_DATE DATE,
	PRIMARY KEY (ORDER_NUM),
	FOREIGN KEY (AGENCY_ID) REFERENCES AGENCY_ACCOUNT(AGENCY_ID),
	FOREIGN KEY (WAREHOUSE_ID) REFERENCES WAREHOUSE(WAREHOUSE_ID),
	FOREIGN KEY (ITEM_ID) REFERENCES ITEM(ITEM_ID)
)


--Accountant_Account data
INSERT INTO ACCOUNTANT_ACCOUNT VALUES('vidar1412', 'khocakEo113', 'Truong Trung Hieu', 'Male', 'vidar1412@gmail.com', '0904586408', 'To 12-16, duong Su Doan 9, xa Vinh Loc A, huyen Binh Chanh');
INSERT INTO ACCOUNTANT_ACCOUNT VALUES('vidar2012', 'khocakEo113', 'Truong Trung Long', 'Male', 'vidar14156@gmail.com', '0987654678', 'To 12-16, duong Su Doan 9, xa Vinh Loc A, huyen Binh Chanh');
INSERT INTO ACCOUNTANT_ACCOUNT VALUES('vidar2013', 'khocakEo113', 'Nguyen Long Hoang', 'Male', 'vidar14156@gmail.com', '0987654678', 'To 12-16, duong Su Doan 9, xa Vinh Loc A, huyen Binh Chanh');
INSERT INTO ACCOUNTANT_ACCOUNT VALUES('vidar2014', 'khocakEo113', 'Tran Hoai Phat', 'Male', 'vidar14156@gmail.com', '0987654678', 'To 12-16, duong Su Doan 9, xa Vinh Loc A, huyen Binh Chanh');
INSERT INTO ACCOUNTANT_ACCOUNT VALUES('vidar2015', 'khocakEo113', 'Pham Thi Trang', 'Female', 'vidar14156@gmail.com', '0987654678', 'To 12-16, duong Su Doan 9, xa Vinh Loc A, huyen Binh Chanh');
--ITEM DATA
INSERT INTO ITEM VALUES('119H0023', 'THUC PHAM CHUC NANG 1', 'TIM MACH', 'TUAN HOAN MAU', '#1 FOODS', 119200, 'Ho Tro dieu tri benh tim mach cuc ky hieu qua', 1);
INSERT INTO ITEM VALUES('119H0024', 'THUC PHAM CHUC NANG 2', 'GAN', 'TUAN HOAN MAU', '#1 FOODS', 219200, 'Ho Tro dieu tri benh GAN cuc ky hieu qua', 1);
INSERT INTO ITEM VALUES('119H0035', 'THUC PHAM CHUC NANG 3', 'DA DAY', 'TUAN HOAN MAU', '#1 FOODS', 319200, 'Ho Tro dieu tri benh DA DAY cuc ky hieu qua', 1);
INSERT INTO ITEM VALUES('119H0036', 'THUC PHAM CHUC NANG 4', 'TIM MACH', 'TUAN HOAN MAU', '#1 FOODS', 519200, 'Ho Tro dieu tri benh tim mach cuc ky hieu qua', 1);
INSERT INTO ITEM VALUES('119H0040', 'THUC PHAM CHUC NANG 5', 'XUONG KHOP', 'TUAN HOAN MAU', '#1 FOODS', 449200, 'Ho Tro dieu tri benh XUONG KHOP cuc ky hieu qua', 1);
--COMPANY DATA
INSERT INTO COMPANY VALUES ('#1 FUNCTIONAL FOODS SUPPLIER', 'theBestFunctionalFoodsSupplier@foods.com', '0908765948', '12, Ly Chinh Thang, Phuong 8, quan 3, TP.HCM');
--AGENCY_ACCOUNT DATA
INSERT INTO AGENCY_ACCOUNT VALUES('TruongHieu1510', 'khocakEo113', 'Truong Trung Hieu', '48, Su Doan 9, huyen Binh Chanh, TP.HCM', 'vidar1412@gmail.com', '0904857654')
INSERT INTO AGENCY_ACCOUNT VALUES('id1516', 'khocakEo113', 'Truong Trung Hieu', '48, Su Doan 9, huyen Binh Chanh, TP.HCM', 'vidar1412@gmail.com', '0904857654')
INSERT INTO AGENCY_ACCOUNT VALUES('id1517', 'khocakEo113', 'Like Canh Long', 'quan Binh Tan, TP.HCM', 'vidar1412@gmail.com', '0904857654')
INSERT INTO AGENCY_ACCOUNT VALUES('id1518', 'khocakEo113', 'Thich Canh Long', '48, Su Doan 9, huyen Binh Chanh, TP.HCM', 'vidar1412@gmail.com', '0904857654')
INSERT INTO AGENCY_ACCOUNT VALUES('id1519', 'khocakEo113', 'Truong Trung Hieu', '48, Su Doan 9, huyen Binh Chanh, TP.HCM', 'vidar1412@gmail.com', '0904857654')
--WAREHOUSE DATA
INSERT INTO WAREHOUSE VALUES('wh1923', 'CHI NHANH BINH DUONG', '49, DAI LO BINH DUONG, TINH BINH DUONG, Vietnam', '098765789', 'PHAM NGUYEN THAI BAO', 200, 1205);
INSERT INTO WAREHOUSE VALUES('wh1924', 'CHI NHANH BAC NINH', '52, LE PHUNG HIEU, KHU NIEM XA, PHUONG KINH BAC, THANH PHO BAC NINH, BAC NINH, Vietnam', '098765789', 'PHAM NGUYEN THAI BAO', 200, 1205);
INSERT INTO WAREHOUSE VALUES('wh1925', 'CHI NHANH MIEN TAY', '103, KHU PHO 8, THI TRAN CAN DUOC, HUYEN CAN DUOC, LONG AN ', '098765789', 'PHAM NGUYEN THAI BAO', 200, 1205);
INSERT INTO WAREHOUSE VALUES('wh1926', 'CHI NHANH DA LAT', '46, BA THANG HAI, PHUONG 12, THANH PHO DA LAT, TINH LAM DONG, Vietnam', '098765789', 'PHAM NGUYEN THAI BAO', 200, 1205);
INSERT INTO WAREHOUSE VALUES('wh1927', 'CHI NHANH HA NOI', '56, VU TRONG KHANH, PHUONG MO LAO, QUAN CAU GIAY, HA NOI, Vietnam', '098765789', 'PHAM NGUYEN THAI BAO', 200, 1205);
--IMPORTRECEIPT DATA
INSERT INTO IMPORTRECEIPT VALUES('1000499874', '119H0024', 'vidar1412', 'wh1923', 200, '2021-12-12', 43840000);
INSERT INTO IMPORTRECEIPT VALUES('1000499875', '119H0024', 'vidar1412', 'wh1923', 200, '2021-12-12', 43840000);
INSERT INTO IMPORTRECEIPT VALUES('1000499876', '119H0024', 'vidar1412', 'wh1923', 200, '2021-12-12', 43840000);
INSERT INTO IMPORTRECEIPT VALUES('1000499877', '119H0024', 'vidar1412', 'wh1923', 200, '2021-12-12', 43840000);
--EXPORTRECEIPT DATA
INSERT INTO EXPORTRECEIPT VALUES('EX19786', 'id1516', 'wh1923', '119H0023', 350, 41720000, '2021-12-14', '2021-12-15');
INSERT INTO EXPORTRECEIPT VALUES('EX19787', 'id1516', 'wh1923', '119H0023', 350, 41720000, '2021-12-14', '2021-12-15');
INSERT INTO EXPORTRECEIPT VALUES('EX19788', 'id1516', 'wh1923', '119H0023', 350, 41720000, '2021-12-14', '2021-12-15');
INSERT INTO EXPORTRECEIPT VALUES('EX19789', 'id1516', 'wh1923', '119H0023', 350, 41720000, '2021-12-14', '2021-12-15');

INSERT INTO IMPORTRECEIPT VALUES('1000499878', '119H0023', 'vidar1412', 'wh1923', 200, '2021-12-12', SELECT ITEM.ITEM_PRICE * 200 FROM ITEM WHERE ITEM_ID = '119H0023' );
SELECT ITEM.ITEM_PRICE * 200 FROM ITEM WHERE ITEM_ID = '119H002'

INSERT INTO IMPORTRECEIPT VALUES('1000499878', 'vidar1412','119H0024','wh1923','240','6/1/2022 12:09:19 AM',SELECT ITEM.ITEM_PRICE *240 FROM ITEM WHERE ITEM_ID = '119H0024')

INSERT INTO IMPORTRECEIPT VALUES('1000499878', 'vidar1412','119H0023','wh1923','140','6/1/2022 12:13:47 AM','SELECT ITEM.ITEM_PRICE *140 FROM ITEM WHERE ITEM_ID = '119H0024')'